#!/usr/bin/env bash

set -e
set -o pipefail

BUILD_DIR=$1
CACHE_DIR=$2
CROW_DIR=$BUILD_DIR/libs/crow

echo "-----> Building Crow"
cd $CROW_DIR
mkdir build
cd build
cmake ..
make

echo "-----> Compiling app"

cd $CACHE_DIR

clang++-6.0 \
-std=c++17 \
$BUILD_DIR/src/main.cpp \
-Wall \
-lboost \
-L$CROW_DIR/build \
-I$BUILD_DIR/src \
-I$CROW_DIR/include \
-o $BUILD_DIR/main \
-v \

